<div class="container mt-4">
  <!-- Tabs -->
  <div class="tabs mb-3 mt-4">
    <button class="tab-btn mb-4 me-3"
            [class.active]="activeTab === 'requestPending'"
            (click)="switchTab('requestPending')">
      Request Pending
    </button>
    <button class="tab-btn mb-4 me-3"
            [class.active]="activeTab === 'requestCompleted'"
            (click)="switchTab('requestCompleted')">
      Request Completed
    </button>
  </div>
  <!-- Leave Cards -->
  <ng-container *ngIf="activeTab === 'requestPending'">
    <ng-scrollbar style="height: 80vh;">
      <div class="row g-4">
        <div class="col-md-6" *ngFor="let request of requestPending">
          <div class="card shadow-sm border-0 rounded-4 p-3">
            <div class="d-flex justify-content-between align-items-start">
              <div class="d-flex align-items-center">
                <img
                  [src]="request.imageUrl"
                  class="rounded-circle me-3"
                  width="50"
                  height="50"
                  alt="User avatar"
                />
                <div>
                  <h6 class="mb-0">{{ request.fullName }}</h6>
                  <small class="text-muted">{{ request.designation }}</small>
                </div>
              </div>
              <div class="text-end">
                <span class="badge bg-light text-secondary border me-1">
                  {{ request.leaveType }}
                </span>
                <span class="badge bg-light text-secondary border">
                  {{ request.duration }}
                </span>
              </div>
            </div>

            <p class="mt-3 mb-2 fw-semibold">{{ request.reason }}</p>
            <div>
              <small class="text-muted">{{ request.fromDate }} - {{ request.toDate }}</small>
            </div>

            <!-- Show action buttons only in 'requestPending' -->
            <div *ngIf="activeTab === 'requestPending'" class="d-flex justify-content-end align-items-center mt-1 gap-3">
              <button class="cancel" (click)="onLeaveAction(request.LeavePK, 'CANCELLED')">Cancel</button>
              <button class="approve" (click)="onLeaveAction(request.LeavePK, 'APPROVED')">Approve</button>
            </div>
          </div>
        </div>
      </div>
    </ng-scrollbar>
  </ng-container>

  <ng-container *ngIf="activeTab === 'requestCompleted'">
    <ng-scrollbar style="height: 80vh;">
      <div class="row g-4">
        <div class="col-md-6" *ngFor="let request of requestCompleted">
          <div class="card shadow-sm border-0 rounded-4 p-3">
            <div class="d-flex justify-content-between align-items-start">
              <div class="d-flex align-items-center">
                <img
                  [src]="request.imageUrl"
                  class="rounded-circle me-3"
                  width="50"
                  height="50"
                  alt="User avatar"
                />
                <div>
                  <h6 class="mb-0">{{ request.fullName }}</h6>
                  <small class="text-muted">{{ request.designation }}</small>
                </div>
              </div>
              <div class="text-end">
                <span class="badge bg-light text-secondary border me-1">
                  {{ request.leaveType }}
                </span>
                <span class="badge bg-light text-secondary border">
                  {{ request.duration }}
                </span>
              </div>
            </div>

            <p class="mt-3 mb-2 fw-semibold">{{ request.reason }}</p>
            <div>
              <small class="text-muted">{{ request.fromDate }} - {{ request.toDate }}</small>
            </div>

            <!-- Show action buttons only in 'requestPending' -->
            <div *ngIf="activeTab === 'requestCompleted'" class="d-flex justify-content-end align-items-center mt-1 gap-3">
              <button class="cancel" (click)="onLeaveAction(request.LeavePK,request.leaveStatus )">{{request.leaveStatus==='APPROVED'?'Approved':'Cancelled'}}</button>
            </div>
          </div>
        </div>
      </div>
    </ng-scrollbar>
  </ng-container>
</div>
